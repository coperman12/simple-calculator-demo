# ============================================================================
# TOX CONFIGURATION - Test in Multiple Environments
# ============================================================================
#
# ðŸŽ¯ What is Tox?
# Tox automates testing in multiple Python environments to ensure your code
# works across different Python versions and configurations.
#
# ðŸš€ Quick Start:
#   Install tox:     pip install tox
#   Run all tests:   tox
#   Run specific:    tox -e py312
#   Run fast:        tox -e py312 --parallel
#
# ðŸ’¡ Why use Tox?
#   âœ… Test across multiple Python versions
#   âœ… Isolated environments (no conflicts)
#   âœ… Consistent testing locally and in CI
#   âœ… Catches version-specific issues early
#
# ============================================================================

[tox]
# Python versions to test against
# Add/remove based on your support requirements
envlist = py38,py39,py310,py311,py312,lint,coverage
skip_missing_interpreters = true  # Don't fail if a Python version is missing
minversion = 4.0

[testenv]
# Default test environment configuration
description = Run unit tests with pytest
deps =
    pytest>=7.4.0
    pytest-cov>=4.1.0
    pytest-html>=3.2.0
    allure-pytest>=2.13.0
commands =
    # Run tests with coverage
    pytest {posargs:tests/} -v --cov=src --cov-report=term-missing

[testenv:lint]
# Linting environment (ruff + pre-commit checks)
description = Run linters and code quality checks
skip_install = true
deps =
    ruff>=0.8.0
    pre-commit>=3.0.0
commands =
    ruff check src/ tests/
    ruff format --check src/ tests/
    pre-commit run --all-files

[testenv:coverage]
# Coverage reporting environment
description = Generate detailed coverage report
deps =
    pytest>=7.4.0
    pytest-cov>=4.1.0
    pytest-html>=3.2.0
commands =
    pytest tests/ -v \
        --cov=src \
        --cov-report=term-missing \
        --cov-report=html:htmlcov \
        --cov-report=xml:coverage.xml \
        --html=reports/pytest_html_report.html \
        --self-contained-html

[testenv:fast]
# Fast test environment (no coverage, just tests)
description = Run tests quickly without coverage
deps =
    pytest>=7.4.0
commands =
    pytest tests/ -v --tb=short

# ============================================================================
# USAGE EXAMPLES
# ============================================================================
#
# Test everything:
#   tox
#
# Test specific Python version:
#   tox -e py312
#
# Run linting only:
#   tox -e lint
#
# Generate coverage report:
#   tox -e coverage
#
# Fast test (no coverage):
#   tox -e fast
#
# Run tests in parallel:
#   tox --parallel
#
# ============================================================================
