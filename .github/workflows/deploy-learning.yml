# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘              ðŸš€ LEARNING UI DEPLOYMENT - GITHUB PAGES                      â•‘
# â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
# â•‘  This workflow deploys the learning UI and landing page to GitHub Pages.  â•‘
# â•‘                                                                           â•‘
# â•‘  ðŸŽ¯ WHAT THIS FILE DOES:                                                  â•‘
# â•‘  1. Triggers when learning files or index.html change                     â•‘
# â•‘  2. Builds the site structure (landing page + learning UI)                â•‘
# â•‘  3. Deploys to GitHub Pages                                               â•‘
# â•‘                                                                           â•‘
# â•‘  ðŸ“‚ DEPLOYED STRUCTURE:                                                   â•‘
# â•‘  /             â†’ Landing page (index.html)                                â•‘
# â•‘  /learn/       â†’ Learning UI (docs/learn/)                                â•‘
# â•‘  /assets/      â†’ Shared assets (logo, images, etc.)                       â•‘
# â•‘  /allure/      â†’ Allure reports (managed by tests.yml)                    â•‘
# â•‘                                                                           â•‘
# â•‘  â±ï¸  TOTAL TIME: ~30 seconds                                               â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

name: ðŸ“š Deploy Learning UI

# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚ TRIGGERS: When does this workflow run?                                      â”‚
# â”‚                                                                             â”‚
# â”‚ ðŸ’¡ EFFICIENT TRIGGERING:                                                    â”‚
# â”‚ - Only runs when learning-related files change (not on every commit!)       â”‚
# â”‚ - Paths filter ensures we don't waste CI time on unrelated changes          â”‚
# â”‚ - Manual dispatch available for testing                                     â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
on:
  push:
    branches: [main]
    paths:
      - 'docs/learn/**'           # Learning UI files
      - 'index.html'              # Landing page
      - 'assets/**'               # Shared assets
      - '.github/workflows/deploy-learning.yml'  # This workflow itself
  workflow_dispatch:  # Manual trigger from GitHub UI

# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚ PERMISSIONS: What can this workflow do?                                     â”‚
# â”‚                                                                             â”‚
# â”‚ ðŸ’¡ WHY THESE PERMISSIONS:                                                   â”‚
# â”‚ - contents:read = Can read the repository files                             â”‚
# â”‚ - pages:write = Can deploy to GitHub Pages                                  â”‚
# â”‚ - id-token:write = Required for secure GitHub Pages deployment              â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
permissions:
  contents: read
  pages: write
  id-token: write

# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚ CONCURRENCY: Coordinate with test workflow                                  â”‚
# â”‚                                                                             â”‚
# â”‚ ðŸ’¡ WHY THIS MATTERS:                                                        â”‚
# â”‚ - Both this workflow and tests.yml deploy to GitHub Pages                   â”‚
# â”‚ - They share the "pages" group to prevent simultaneous deploys              â”‚
# â”‚ - cancel-in-progress: false = Let running deploys finish                    â”‚
# â”‚                                                                             â”‚
# â”‚ ðŸŽ¯ COORDINATION:                                                            â”‚
# â”‚ If both workflows trigger, they queue up instead of conflicting!            â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
concurrency:
  group: "pages"
  cancel-in-progress: false

jobs:
  # â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
  # â•‘                     BUILD & DEPLOY LEARNING UI                          â•‘
  # â•‘                                                                         â•‘
  # â•‘  This job builds the site structure and deploys to GitHub Pages.        â•‘
  # â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  deploy:
    name: ðŸš€ Deploy Learning UI
    runs-on: ubuntu-latest
    
    # Connect to GitHub Pages environment
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    
    steps:
      # â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      # â”‚ STEP 1: Get the code                                                â”‚
      # â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      - name: Checkout repository
        uses: actions/checkout@v4
      
      # â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      # â”‚ STEP 2: Build the site structure                                    â”‚
      # â”‚                                                                     â”‚
      # â”‚ ðŸ’¡ WHAT WE'RE BUILDING:                                             â”‚
      # â”‚ We create a "_site" directory with:                                 â”‚
      # â”‚ - Landing page at root (index.html)                                 â”‚
      # â”‚ - Learning UI in /learn subdirectory                                â”‚
      # â”‚ - Assets directory for images/logos                                 â”‚
      # â”‚                                                                     â”‚
      # â”‚ ðŸ“ STRUCTURE:                                                       â”‚
      # â”‚ _site/                                                              â”‚
      # â”‚ â”œâ”€â”€ index.html          â† Landing page                             â”‚
      # â”‚ â”œâ”€â”€ learn/              â† Learning UI                              â”‚
      # â”‚ â”‚   â”œâ”€â”€ index.html                                                 â”‚
      # â”‚ â”‚   â”œâ”€â”€ learn.css                                                  â”‚
      # â”‚ â”‚   â””â”€â”€ learn.js                                                   â”‚
      # â”‚ â””â”€â”€ assets/             â† Shared assets                            â”‚
      # â”‚     â”œâ”€â”€ logo.png                                                   â”‚
      # â”‚     â””â”€â”€ ...                                                        â”‚
      # â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      - name: Build site structure
        run: |
          echo "ðŸ“¦ Building site structure..."
          
          # Create the site directory
          mkdir -p _site
          
          # Copy landing page
          cp index.html _site/
          echo "âœ… Copied landing page"
          
          # Copy learning UI
          cp -r docs/learn _site/
          echo "âœ… Copied learning UI"
          
          # Copy assets
          cp -r assets _site/
          echo "âœ… Copied assets"
          
          # Copy guides for relative links from learning UI
          if [ -d "guides" ]; then
            cp -r guides _site/
            echo "âœ… Copied guides"
          fi
          
          echo "ðŸŽ‰ Site structure complete!"
          echo ""
          echo "ðŸ“‚ Site structure:"
          tree _site -L 2 || ls -la _site
      
      # â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      # â”‚ STEP 3: Setup GitHub Pages                                          â”‚
      # â”‚                                                                     â”‚
      # â”‚ ðŸ’¡ OFFICIAL ACTION:                                                 â”‚
      # â”‚ This configures GitHub Pages settings for the deployment.           â”‚
      # â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      - name: Setup Pages
        uses: actions/configure-pages@v5
      
      # â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      # â”‚ STEP 4: Upload as Pages artifact                                    â”‚
      # â”‚                                                                     â”‚
      # â”‚ ðŸ’¡ ARTIFACT-BASED DEPLOYMENT:                                       â”‚
      # â”‚ Modern GitHub Pages uses artifacts instead of branch-based deploy.  â”‚
      # â”‚ This is more reliable and integrates better with Actions.           â”‚
      # â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      - name: Upload artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: _site
      
      # â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      # â”‚ STEP 5: Deploy to GitHub Pages                                      â”‚
      # â”‚                                                                     â”‚
      # â”‚ ðŸ’¡ THE FINAL STEP:                                                  â”‚
      # â”‚ This actually publishes the site to GitHub Pages.                   â”‚
      # â”‚ The URL will be available in the deployment output.                 â”‚
      # â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
      
      # â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      # â”‚ STEP 6: Generate summary                                            â”‚
      # â”‚                                                                     â”‚
      # â”‚ Shows a nice summary in the GitHub Actions UI with links.           â”‚
      # â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      - name: Generate deployment summary
        run: |
          echo "## ðŸ“š Learning UI Deployment" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "âœ… **Successfully deployed to GitHub Pages!**" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "### ðŸ”— Links" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸ  [Landing Page](${{ steps.deployment.outputs.page_url }})" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸ“š [Learning UI](${{ steps.deployment.outputs.page_url }}learn/)" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸ“Š [Test Reports](${{ steps.deployment.outputs.page_url }}allure/)" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "### ðŸ“¦ Deployed Content" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "- Landing page (index.html)" >> $GITHUB_STEP_SUMMARY
          echo "- Learning UI (docs/learn/)" >> $GITHUB_STEP_SUMMARY
          echo "- Assets (assets/)" >> $GITHUB_STEP_SUMMARY
          echo "- Guides (guides/)" >> $GITHUB_STEP_SUMMARY
